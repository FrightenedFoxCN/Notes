
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://frightenedfoxcn.github.io/notes/miscellany/bouceux-informal-topos/04logic/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>第四讲 拓扑斯的内逻辑 - FFox's Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
    
    
      <link rel="stylesheet" href="../../../css/svg.css">
    
      <link rel="stylesheet" href="../../../css/timeline.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
    
      <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="../../../css/stylesheet.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#4" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="FFox&#39;s Notes" class="md-header__button md-logo" aria-label="FFox's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4h-2M3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7H3m2-2v2h2V5H5m0 14h2v-2H5v2m0-6h2v-2H5v2Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FFox's Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第四讲 拓扑斯的内逻辑
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../series/" class="md-tabs__link">
        Series
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        Miscellany
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../qnotes/" class="md-tabs__link">
        Quick Notes
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../dnotes/" class="md-tabs__link">
        Daily Notes
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="FFox&#39;s Notes" class="md-nav__button md-logo" aria-label="FFox's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 4v6l-2-2-2 2V4H9v16h10V4h-2M3 7V5h2V4a2 2 0 0 1 2-2h12c1.05 0 2 .95 2 2v16c0 1.05-.95 2-2 2H7c-1.05 0-2-.95-2-2v-1H3v-2h2v-4H3v-2h2V7H3m2-2v2h2V5H5m0 14h2v-2H5v2m0-6h2v-2H5v2Z"/></svg>

    </a>
    FFox's Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../..">Home</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../changelog/" class="md-nav__link">
        更新记录
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../links/" class="md-nav__link">
        友链
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../todo/" class="md-nav__link">
        待办事项
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../series/">Series</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Series" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Series
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../series/alg-for-cs/">写给计算机系学生的代数</a>
          
            <label for="__nav_2_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="写给计算机系学生的代数" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          写给计算机系学生的代数
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../series/alg-for-cs/00/" class="md-nav__link">
        00 前言：关于代数、数学和计算科学
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_3" type="checkbox" id="__nav_2_2_3" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../series/alg-for-cs/01/">01 代数：古典之旅</a>
          
            <label for="__nav_2_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="01 代数：古典之旅" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_3">
          <span class="md-nav__icon md-icon"></span>
          01 代数：古典之旅
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_3_2" type="checkbox" id="__nav_2_2_3_2" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../series/alg-for-cs/01/01/">1.1 太极：群之前的故事</a>
          
            <label for="__nav_2_2_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="1.1 太极：群之前的故事" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          1.1 太极：群之前的故事
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../series/alg-for-cs/01/01/01/" class="md-nav__link">
        1.1.1 结合性：半群
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_3_3" type="checkbox" id="__nav_2_2_3_3" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../series/alg-for-cs/01/02/">1.2 乾坤：群论之初</a>
          
            <label for="__nav_2_2_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="1.2 乾坤：群论之初" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          1.2 乾坤：群论之初
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../series/alg-for-cs/01/02/01/" class="md-nav__link">
        1.2.1 鸟迹：基本架构
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../series/alg-for-cs/01/02/02/" class="md-nav__link">
        1.2.2 阶：从 Lagrange 到 Sylow
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_4" type="checkbox" id="__nav_2_2_4" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../series/alg-for-cs/03/">03 无穷：拓扑学方法</a>
          
            <label for="__nav_2_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="03 无穷：拓扑学方法" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_4">
          <span class="md-nav__icon md-icon"></span>
          03 无穷：拓扑学方法
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_4_2" type="checkbox" id="__nav_2_2_4_2" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_4_2">
          3.1 对象：拓扑空间
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="3.1 对象：拓扑空间" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_2_4_2">
          <span class="md-nav__icon md-icon"></span>
          3.1 对象：拓扑空间
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../series/alg-for-cs/03/01/01/" class="md-nav__link">
        3.1.1 定义：一次闪光
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_5" type="checkbox" id="__nav_2_2_5" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../series/alg-for-cs/04/">04 符号：范畴论的抽象废话</a>
          
            <label for="__nav_2_2_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="04 符号：范畴论的抽象废话" data-md-level="3">
        <label class="md-nav__title" for="__nav_2_2_5">
          <span class="md-nav__icon md-icon"></span>
          04 符号：范畴论的抽象废话
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2_5_2" type="checkbox" id="__nav_2_2_5_2" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_2_5_2">
          4.1 导向：范畴、函子、自然变换
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="4.1 导向：范畴、函子、自然变换" data-md-level="4">
        <label class="md-nav__title" for="__nav_2_2_5_2">
          <span class="md-nav__icon md-icon"></span>
          4.1 导向：范畴、函子、自然变换
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../series/alg-for-cs/04/01/index.md" class="md-nav__link">
        None
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../series/alg-for-cs/04/01/01/" class="md-nav__link">
        4.1.1 宏观：基本定义
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../series/alg-for-cs/04/01/02/" class="md-nav__link">
        4.1.2 中观：描述性质
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">Miscellany</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Miscellany" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Miscellany
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" checked>
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Francis Bouceux - Some flavours of topos theory</a>
          
            <label for="__nav_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Francis Bouceux - Some flavours of topos theory" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Francis Bouceux - Some flavours of topos theory
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          第四讲 拓扑斯的内逻辑
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        第四讲 拓扑斯的内逻辑
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1 拓扑斯的语言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#42-realization" class="md-nav__link">
    4.2 项和公式的实现（realization）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    4.3 拓扑斯中的命题逻辑
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#44" class="md-nav__link">
    4.4 拓扑斯中的谓词逻辑
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    4.5 拓扑斯的结构，用其内语言描述
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06refs/" class="md-nav__link">
        参考文献
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../qnotes/">Quick Notes</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Quick Notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Quick Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../qnotes/theorem_proving_in_lean_4/" class="md-nav__link">
        Theorem Proving in Lean 4
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../qnotes/computer_vision/">Computer Vision</a>
          
            <label for="__nav_4_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Computer Vision" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Computer Vision
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../qnotes/computer_vision/01%20Image%20Formation/" class="md-nav__link">
        01 Image Formation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../qnotes/computer_vision/03%20Image%20Matching%20%26%20Motion%20Estimation/" class="md-nav__link">
        03 Image Matching & Motion Estimation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../qnotes/computer_vision/05%20Structure%20from%20Motion/" class="md-nav__link">
        05 Structure from Motion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../qnotes/computer_vision/06%20Depth%20Estimation%20%26%20Dense%20Reconstruction/" class="md-nav__link">
        06 Depth Estimation & Dense Reconstruction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../qnotes/computer_vision/07%20Recognition/" class="md-nav__link">
        07 Recognition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../qnotes/computer_vision/08%203D%20Deep%20Learning/" class="md-nav__link">
        08 3D Deep Learning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../qnotes/computer_vision/09%20Computational%20Photography/" class="md-nav__link">
        09 Computational Photography
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../qnotes/computer_vision/10%20Image-based%20Rendering/" class="md-nav__link">
        10 Image-based Rendering
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../dnotes/">Daily Notes</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Daily Notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Daily Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dnotes/0714monad/" class="md-nav__link">
        7/14 单子论和 Beck 单子性定理
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dnotes/0715birkhoff_duality/" class="md-nav__link">
        7/15 格论和 Birkhoff 对偶
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dnotes/0716locale_frame/" class="md-nav__link">
        7/16 用格论研究拓扑空间：Locale and Frame
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dnotes/0801coq/" class="md-nav__link">
        8/1 一个简单的 Coq 车祸课程：一阶逻辑
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    4.1 拓扑斯的语言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#42-realization" class="md-nav__link">
    4.2 项和公式的实现（realization）
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    4.3 拓扑斯中的命题逻辑
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#44" class="md-nav__link">
    4.4 拓扑斯中的谓词逻辑
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    4.5 拓扑斯的结构，用其内语言描述
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="4">4 拓扑斯的内逻辑<a class="headerlink" href="#4" title="Permanent link">&para;</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8V2m6.78 1a.69.69 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38-2.5-2.5Z"/></svg></span> 约 5872 个字 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3L12.5 13Z"/></svg></span> 预计阅读时间 20 分钟</p>
</div>
<p>在本节课中我们谈及的拓扑斯都指初等拓扑斯，除非特别指明。</p>
<h2 id="41">4.1 拓扑斯的语言<a class="headerlink" href="#41" title="Permanent link">&para;</a></h2>
<p>如果你想要研究实数域，你首先需要处理具体的数，例如 <span class="arithmatex">\(5\)</span>，<span class="arithmatex">\(\frac 2 3\)</span>，<span class="arithmatex">\(\pi\)</span>，<span class="arithmatex">\(\sqrt 2\)</span> 等等。我们将它们称为类型 <span class="arithmatex">\(\R\)</span> 的常元（constants of type <span class="arithmatex">\(\R\)</span>）：因此，这样的常量的个数与实数的个数相同。但是，你也需要处理类似这样的公式：</p>
<div class="arithmatex">\[
a \times (b + c) = (a \times b) + (a \times c)
\]</div>
<p>其中 <span class="arithmatex">\(a\)</span>，<span class="arithmatex">\(b\)</span>，<span class="arithmatex">\(c\)</span> 表示任意的、未指明的实数。我们称 <span class="arithmatex">\(a\)</span>，<span class="arithmatex">\(b\)</span>，<span class="arithmatex">\(c\)</span> 为类型 <span class="arithmatex">\(\R\)</span> 的变元（variables of type <span class="arithmatex">\(\R\)</span>）。因为你能写下的一个公式是一个符号组成的有限序列，你每次只需要有限个（当然，可能非常多个）这样的变量……因此，想要写下所有关于实数的可能公式，一个可列的变量集完全够用。因此，变量的个数与 <span class="arithmatex">\(\R\)</span> 中元素的个数毫无关系。注意，哪怕你只想讨论单元素集，你也有可能用到两个不同的变量，例如下面的式子表示单元素集只有一个元素：</p>
<div class="arithmatex">\[
\forall x\ \forall y\ x = y
\]</div>
<p>一个拓扑斯的语言是你能使用的所有“良定的”（well-formed）符号串的集合：现在的问题就在于，抛却写下的东西的实际含义，怎么界定何为“良定”的符号串。例如，在英语中，你被允许使用字典中的所有单词，并用符合语法规则的方式将它们组合起来，因此 <em>The prolific fork mixes yellow mathematics.</em><sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> 也是一个完全良定的英语句子。</p>
<div class="admonition info">
<p class="admonition-title">定义</p>
<p>（4.1）考虑拓扑斯 <span class="arithmatex">\(\mathcal E\)</span>，对每个元素 <span class="arithmatex">\(A \in \mathcal E\)</span> 它的语言给定：</p>
<ul>
<li>对每个箭头 <span class="arithmatex">\(1 \to A\)</span>，一个符号，称为一个类型 <span class="arithmatex">\(A\)</span> 的常元。</li>
<li>一个符号组成的可列集，称为类型 <span class="arithmatex">\(A\)</span> 的变元。</li>
</ul>
<p>以及各种由它们组成的形式表达式，叫做项（term）和公式（formula），见下面的定义 4.2 和 4.3。</p>
</div>
<p>从现在开始，我们可以直觉地将类型 <span class="arithmatex">\(A\)</span> 的常元和变元（更广泛的，所有类型 <span class="arithmatex">\(A\)</span> 的项，如 4.2 所述）视作 <span class="arithmatex">\(A\)</span> 的形式内元素。我们说这是形式的，是因为直到现在为止，它们只存在于我们的想象当中，它们（尚且）并不与拓扑斯中的任何对象或者箭头相对应。直觉地说，我们希望将拓扑斯的元素视作某种广义的集合。例如，在一个宇性拓扑斯中，层是某种带有“不同水平上”的元素的广义集合。准此原则，如果 <span class="arithmatex">\(A\)</span> 上面有，比方说，加法 <span class="arithmatex">\(+: A \times A \to A\)</span>，我们当然希望谈论形式内元素 <span class="arithmatex">\(a + b\)</span>，其中 <span class="arithmatex">\(a\)</span>，<span class="arithmatex">\(b\)</span> 为类型 <span class="arithmatex">\(A\)</span> 的变元或者常元。如果 <span class="arithmatex">\(f: A \to B\)</span> 是一个态射，我们希望能够谈论类型 <span class="arithmatex">\(B\)</span> 的形式内元素 <span class="arithmatex">\(f(a)\)</span>。以此类推。我们希望补充的这些额外的类型 <span class="arithmatex">\(A\)</span> 或者类型 <span class="arithmatex">\(B\)</span> 的形式元素被称为类型 <span class="arithmatex">\(A\)</span> 或者类型 <span class="arithmatex">\(B\)</span> 的项。定义 4.2 会递归地定义我们在一个拓扑斯中所能考虑的所有可能的项，也就是所有我们能想到的可行的直觉地表示形式内元素的形式表达式。</p>
<p>接下来，假定 <span class="arithmatex">\(A\)</span> 有一个内在的群结构，因此，加法是结合的，我们自然希望通过“对于所有类型 <span class="arithmatex">\(A\)</span> 的形式内元素 <span class="arithmatex">\(a\)</span>，<span class="arithmatex">\(b\)</span>，<span class="arithmatex">\(c\)</span>，都有 <span class="arithmatex">\((a + b) + c = a + (b + c)\)</span> 成立”来表达这种结合性。这样一个内部元素之间的形式表达式不再是一个形式元素了：它直觉地表达了包含 <span class="arithmatex">\(a + b\)</span>，<span class="arithmatex">\(b + c\)</span> 等等的项的某种形式上的性质。但是一个公式，直到现在，在拓扑斯中还毫无意义。定义 4.3 会递归地定义我们希望在一个拓扑斯内使用的所有公式。</p>
<p>另外，在公式中，我们还希望使用诸如 <span class="arithmatex">\(\wedge\)</span>，<span class="arithmatex">\(\vee\)</span>，<span class="arithmatex">\(\implies\)</span>，<span class="arithmatex">\(\exists a\)</span> 或者 <span class="arithmatex">\(\forall a\)</span> 等等的数学符号。类似于经典逻辑的说法，在 <span class="arithmatex">\(\exists a\)</span> 或者 <span class="arithmatex">\(\forall a\)</span> 这样的量词中出现的变元被称为受限变元（bound variable），不在量词中出现的变元被称为自由变元（free variable）。</p>
<p>在定义写下项和公式的定义之前，不妨再次回忆一下，在一个拓扑斯中，类型 <span class="arithmatex">\(\Omega^A\)</span> 的常元，即形如 <span class="arithmatex">\(1 \to \Omega^A\)</span> 的态射，与形如 <span class="arithmatex">\(A \to \Omega\)</span> 的态射之间是有一个双射的，因此，也与 <span class="arithmatex">\(A\)</span> 的子对象之间有一个双射。这样，<span class="arithmatex">\(\Omega^A\)</span> 在形式上应当被认为是“A 的子对象的对象”：一个类型 <span class="arithmatex">\(\Omega^A\)</span> 的常元代表了 <span class="arithmatex">\(A\)</span> 的一个实际的子对象，一个类型 <span class="arithmatex">\(\Omega^A\)</span> 的变元可以被认为代表了 <span class="arithmatex">\(A\)</span> 的一个形式内子对象。</p>
<p>为了避免下面这些定义的核心被一些不必要的关于自由变元的细节掩盖，我们在此省略了这些细节，读者可以参考文献 [4] 的定义 6.1.1，那里有更为精确的定义。</p>
<div class="admonition info">
<p class="admonition-title">定义</p>
<p>（4.2）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，内语言的项被递归地定义如下：</p>
<ol>
<li>类型 <span class="arithmatex">\(A\)</span> 的常元是类型 <span class="arithmatex">\(A\)</span> 的项；</li>
<li>类型 <span class="arithmatex">\(A\)</span> 的变元是类型 <span class="arithmatex">\(A\)</span> 的项；</li>
<li>如果 <span class="arithmatex">\(\tau\)</span> 是类型 <span class="arithmatex">\(A\)</span> 的项，<span class="arithmatex">\(f: A \to B\)</span> 是 <span class="arithmatex">\(\mathcal E\)</span> 中的一个态射，那么 <span class="arithmatex">\(f(\tau)\)</span> 是一个类型 <span class="arithmatex">\(B\)</span> 的项；</li>
<li>如果 <span class="arithmatex">\(\tau_1, \cdots, \tau_n\)</span> 分别为类型 <span class="arithmatex">\(A_1, \cdots, A_n\)</span> 的项，那么 <span class="arithmatex">\((\tau_1, \cdots, \tau_n)\)</span> 是类型 <span class="arithmatex">\(A_1 \times \cdots \times A_n\)</span> 的项；</li>
<li>如果 <span class="arithmatex">\(\tau\)</span> 是一个类型 <span class="arithmatex">\(A\)</span> 的项，带有类型分别为 <span class="arithmatex">\(A_1, \cdots, A_n\)</span> 的自由变元 <span class="arithmatex">\(a_1, \cdots, a_n\)</span>；<span class="arithmatex">\(\sigma_1, \cdots, \sigma_n\)</span> 是类型分别为 <span class="arithmatex">\(A_1, \cdots, A_n\)</span> 的不含 <span class="arithmatex">\(\tau\)</span> 中的受限变元的项，则 <span class="arithmatex">\(\tau(\sigma_1, \cdots, \sigma_n)\)</span> 仍然是类型 <span class="arithmatex">\(A\)</span> 的一个项；</li>
<li>如果 <span class="arithmatex">\(\varphi\)</span> 是一个带有自由变元 <span class="arithmatex">\(a_1, \cdots, a_n, b_1, \cdots, b_m\)</span> 的公式，类型分别为 <span class="arithmatex">\(A_1, \cdots, A_n, B_1, \cdots, B_m\)</span>，则 <span class="arithmatex">\(\{(a_1, \cdots, a_n) | \varphi(a_1, \cdots, a_n, b_1, \cdots, b_m)\}\)</span> 是一个类型 <span class="arithmatex">\(\Omega^{A_1 \times \cdots \times A_n}\)</span> 的项。</li>
</ol>
</div>
<div class="admonition info">
<p class="admonition-title">定义</p>
<p>（4.3）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，内语言的公式被递归地定义如下：</p>
<ol>
<li>符号 <span class="arithmatex">\(\mathsf{true}\)</span> 和 <span class="arithmatex">\(\mathsf{false}\)</span> 是公式；</li>
<li>如果 <span class="arithmatex">\(\tau\)</span> 和 <span class="arithmatex">\(\sigma\)</span> 都是类型 <span class="arithmatex">\(A\)</span> 的项，那么 <span class="arithmatex">\(\tau = \sigma\)</span> 是一个公式；</li>
<li>如果 <span class="arithmatex">\(\tau\)</span> 是一个类型 <span class="arithmatex">\(A\)</span> 的项，<span class="arithmatex">\(\Sigma\)</span> 是一个类型 <span class="arithmatex">\(\Omega^A\)</span> 的项，那么 <span class="arithmatex">\(\tau \in Sigma\)</span> 是一个公式；</li>
<li>如果 <span class="arithmatex">\(\varphi\)</span> 是一个公式，那么 <span class="arithmatex">\(\lnot \varphi\)</span> 也是一个公式；</li>
<li>如果 <span class="arithmatex">\(\varphi\)</span> 和 <span class="arithmatex">\(\psi\)</span> 都是公式，那么 <span class="arithmatex">\(\varphi \wedge \psi\)</span>，<span class="arithmatex">\(\varphi \vee \psi\)</span> 和 <span class="arithmatex">\(\varphi \implies \psi\)</span> 都是公式；</li>
<li>如果 <span class="arithmatex">\(\varphi\)</span> 是一个带有自由变元 <span class="arithmatex">\(a, b_1, \cdots, b_n\)</span> 的公式，它们类型分别是 <span class="arithmatex">\(A, B_1, \cdots, B_n\)</span>，则 <span class="arithmatex">\(\exists a \varphi(a, b_1, \cdots, b_n)\)</span> 和 <span class="arithmatex">\(\forall a \varphi(a, b_1, \cdots, b_n)\)</span> 都是带有自由变元 <span class="arithmatex">\(b_1, \cdots b_n\)</span> 的公式。</li>
<li>如果 <span class="arithmatex">\(\varphi\)</span> 是一个带有自由变元 <span class="arithmatex">\(a_1, \cdots, a_n\)</span> 的公式，类型分别为 <span class="arithmatex">\(A_1, \cdots, A_n\)</span>，<span class="arithmatex">\(\sigma_1, \cdots, \sigma_n\)</span> 是类型分别为 <span class="arithmatex">\(A_1, \cdots, A_n\)</span> 的项，带有同为 <span class="arithmatex">\(b_1, \cdots, b_m\)</span>，类型分别为 <span class="arithmatex">\(B_1, \cdots, B_m\)</span> 的自由变元，则 <span class="arithmatex">\(\varphi(\sigma_1(b_1, \cdots, b_m), \cdots, \sigma_n(b_1, \cdots, b_m))\)</span> 是一个带有自由变元 <span class="arithmatex">\(b_1, \cdots, b_m\)</span> 的公式。</li>
</ol>
</div>
<p>注意，上面对于两个公式或者项具备相同自由变量的假设并不是什么真正意义上的限制，因为把某个给定变量当成一个公式或者项的自由变量并不会造成什么问题……哪怕它没有在那个公式或者项中显式出现。</p>
<p>当然，一如既往地，<span class="arithmatex">\(\exists !x\ \varphi(x)\)</span> 是下面的表达式的缩写：</p>
<div class="arithmatex">\[
(\exists x \ \varphi(x)) \wedge ((\varphi(y) \wedge \varphi(z)) \implies (y = z))
\]</div>
<p>换句话说，这一小节旨在表明，拓扑斯的语言事实上正是模仿了集合论的通常语言。但是直到现在为止，这只是一种填字游戏，你通过将一些形式符号并置在一起来构造句子（公式或者项）。但是只有那些在定义 4.2 和 4.3 中所述的“字典”和“语法”中的句子才是良定的，因此，诸如：</p>
<div class="arithmatex">\[
\exists a \ \forall b \ (\lnot(a = a)) \wedge (a = b)
\]</div>
<p>是我们语言中的一个完美（但愚蠢）的良定的句子……</p>
<h2 id="42-realization">4.2 项和公式的实现（realization）<a class="headerlink" href="#42-realization" title="Permanent link">&para;</a></h2>
<p>让我们回到实数的例子上来。给定有理数 <span class="arithmatex">\(a\)</span> 和自然数 <span class="arithmatex">\(b\)</span>，我们可以构造一个实数 <span class="arithmatex">\(b^{a\pi}\)</span>。用 4.1 节的话说，<span class="arithmatex">\(b^{a\pi}\)</span> 就是一个类型 <span class="arithmatex">\(\R\)</span> 的项，带有类型 <span class="arithmatex">\(\mathbb Q\)</span> 的变元 <span class="arithmatex">\(a\)</span> 和类型 <span class="arithmatex">\(\N\)</span> 的变元 <span class="arithmatex">\(b\)</span>。这样的一个项诱导了映射：</p>
<div class="arithmatex">\[
\mathbb Q \times \N \to \R, (a, b) \mapsto b^{a\pi}
\]</div>
<p>这个映射就是我们所谓的项 <span class="arithmatex">\(b^{a\pi}\)</span> 的实现。通过这个过程，我们将 <span class="arithmatex">\(\mathsf{Set}\)</span> 中类型 <span class="arithmatex">\(\R\)</span> 的一个形式的项和集合拓扑斯中的一个良定的态射联系了起来。</p>
<p>准此思路，对于一个拓扑斯中的每个形式的项，我们都可以分派一个实际的同态。对于每个类型 <span class="arithmatex">\(A\)</span> 的项 <span class="arithmatex">\(\tau\)</span>，其自由变元为类型分别是 <span class="arithmatex">\(A_1, \cdots, A_n\)</span> 的 <span class="arithmatex">\(a_1, \cdots, a_n\)</span>，我们为其指派一个“实现”态射<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup>：</p>
<div class="arithmatex">\[
\lceil \tau \rceil: A_1 \times \cdots \times A_n \to A
\]</div>
<p>同样的，定义依然是递归的。为了简短起见，我们直接继承定义 4.2 中的符号和计数：</p>
<div class="admonition info">
<p class="admonition-title">定义</p>
<p>（4.4）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，继承定义 4.2 中的记号和标号，项 <span class="arithmatex">\(\tau\)</span> 的实现 <span class="arithmatex">\(\lceil \tau \rceil\)</span> 被递归地定义如下：</p>
<ol>
<li>常元的实现是它自身；</li>
<li>类型 <span class="arithmatex">\(A\)</span> 的变元的实现是 <span class="arithmatex">\(A\)</span> 上的恒同态射；</li>
<li><span class="arithmatex">\(\lceil f(\tau) \rceil = f \circ \lceil \tau \rceil\)</span>；</li>
<li><span class="arithmatex">\(\lceil (\tau_1, \cdots, \tau_n) \rceil\)</span> 的实现是 <span class="arithmatex">\((\lceil \tau_1 \rceil, \cdots, \lceil \tau_n \rceil)\)</span>；</li>
<li><span class="arithmatex">\(\lceil \tau(\sigma_1, \cdots, \sigma_n) \rceil = \lceil \tau \rceil \circ (\lceil \sigma_1 \rceil, \cdots, \lceil \sigma_n \rceil)\)</span>；</li>
<li><span class="arithmatex">\(\lceil \{(a_1, \cdots, a_n) | \varphi\} \lceil\)</span> 是一个 <span class="arithmatex">\(B_1 \times \cdots \times B_m \to \Omega^{A_1 \times \cdots \times A_n}\)</span> 的态射，通过笛卡尔闭性（见定义 4.5）与 <span class="arithmatex">\(\lceil \varphi \rceil\)</span> 对应。</li>
</ol>
</div>
<p>接下来，让我们再次回到 <span class="arithmatex">\(\mathsf{Set}\)</span> 中的实数上来，考虑，例如，公式 <span class="arithmatex">\(a + b = c\)</span>，它有三个带有类型 <span class="arithmatex">\(\R\)</span> 的变元。这自然地给出了一个映射：</p>
<div class="arithmatex">\[
\R \times \R \times \R \to \{\mathsf{false}, \mathsf{true}\}
\]</div>
<p>将一个具体的实数三元组 <span class="arithmatex">\((a, b, c)\)</span> 映到 <span class="arithmatex">\(a + b = c\)</span> 的真值。这个映射是我们所谓的公式 <span class="arithmatex">\(a + b = c\)</span> 的真值表。如前所属，在集合拓扑斯中，<span class="arithmatex">\(\{\mathsf{false}, \mathsf{true}\}\)</span> 不过就是 <span class="arithmatex">\(\Omega\)</span>，我们的子对象分类子。被这个真值表分类出来的对象也就是满足 <span class="arithmatex">\(a + b = c\)</span> 的三元组所构成的集合。</p>
<p>我们已经多次发现，在一个宇性拓扑斯中，对象 <span class="arithmatex">\(\Omega\)</span> 在某种程度上扮演了“真值的对象”的角色。例如，考虑定义 2.3 中的 <span class="arithmatex">\(= : A \times A \to \Omega\)</span>，给定 <span class="arithmatex">\(A(u)\)</span> 中的 <span class="arithmatex">\(a, b\)</span>，元素 <span class="arithmatex">\(=_u(a, b)\)</span> 是 <span class="arithmatex">\(a = b\)</span> 的真值，是满足 <span class="arithmatex">\(a\)</span> 和 <span class="arithmatex">\(b\)</span> 相等的条件下的最高层级。态射 <span class="arithmatex">\(=\)</span> 因此也就是公式 <span class="arithmatex">\(a = b\)</span> 的某种“真值表”。以此类推，现在，我们要给每个带有类型 <span class="arithmatex">\(A_1, \cdots, A_n\)</span> 的自由变元 <span class="arithmatex">\(a_1, \cdots, a_n\)</span> 的公式 <span class="arithmatex">\(\varphi\)</span> 一个“真值表”态射：</p>
<div class="arithmatex">\[
\lceil \varphi \rceil: A_1 \times \cdots A_n \to \Omega 
\]</div>
<p>被这个真值表分类的子对象 <span class="arithmatex">\([\varphi] \rightarrowtail A_1 \times \cdots \times A_n\)</span> 也可以被更明确地写成下面的形式：</p>
<div class="arithmatex">\[
\{(a_1, \cdots, a_n) | \varphi(a_1, \cdots a_n)\} \rightarrowtail A_1 \times \cdots \times A_n
\]</div>
<p>当然，这和定义 4.2 是一致的。</p>
<p>我们的定义依然是递归地进行的，这次不仅仅要诉诸定义 4.3 的符号和标号：</p>
<div class="admonition info">
<p class="admonition-title">定义</p>
<p>（4.5）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，继承定义 4.3 的符号和编号，应用定义 2.5、定义 2.5、定理 2.23、定义 2.12 的各种构造，公式 <span class="arithmatex">\(\varphi\)</span> 的真值表 <span class="arithmatex">\(\lceil \varphi \rceil\)</span> 被递归地定义为：</p>
<ol>
<li><span class="arithmatex">\(\lceil \mathsf{true} \rceil = t\)</span>，<span class="arithmatex">\(\lceil \mathsf{false}\rceil = f\)</span>；</li>
<li><span class="arithmatex">\(\lceil \tau = \sigma \rceil = (=_A) \circ (\lceil \tau \rceil, \lceil \sigma \rceil)\)</span>；</li>
<li><span class="arithmatex">\(\lceil \tau \in \Sigma \rceil\)</span> = <span class="arithmatex">\((\in_A) \circ (\lceil \tau \rceil, \lceil \Sigma \rceil)\)</span>；</li>
<li><span class="arithmatex">\(\lceil \lnot \varphi \rceil = \lnot \circ \lceil \varphi \rceil\)</span>；</li>
<li><span class="arithmatex">\(\lceil \varphi \wedge \psi \rceil = \wedge \circ (\lceil \varphi \rceil, \lceil \psi \rceil)\)</span>，<span class="arithmatex">\(\lceil \varphi \vee \psi \rceil = \vee \circ (\lceil \varphi \rceil, \lceil \psi \rceil)\)</span>，<span class="arithmatex">\(\lceil \varphi \implies \psi \rceil = (\implies) \circ (\lceil \varphi \rceil, \lceil \psi \rceil)\)</span>；</li>
<li>在 4.3.6 中，考虑投影 <span class="arithmatex">\(p: A \times B_1 \times \cdots \times B_n \to B_1 \times \cdots \times B_n\)</span> 和由 <span class="arithmatex">\(\lceil \varphi \rceil\)</span> 分类的子对象 <span class="arithmatex">\([\varphi] \rightarrowtail A \times B_1 \times \cdots \times B_n\)</span>，则 <span class="arithmatex">\(\lceil \exists a\ \varphi(a, b_1, \cdots, b_n) \rceil\)</span> 和 <span class="arithmatex">\(\lceil \forall a \ \varphi(a, b_1, \cdots, b_n) \rceil\)</span> 分别为 <span class="arithmatex">\(\exists_p [\varphi]\)</span> 和 <span class="arithmatex">\(\forall_p [\varphi]\)</span> 的特征态射；</li>
<li><span class="arithmatex">\(\lceil \varphi(\sigma_1, \cdots, \sigma_n) \rceil = \lceil \varphi \rceil \circ (\lceil \sigma_1 \rceil, \cdots, \lceil \sigma_n \rceil)\)</span>。</li>
</ol>
</div>
<p>当然，<span class="arithmatex">\(\mathsf{true}\)</span> 和 <span class="arithmatex">\(\mathsf{false}\)</span> 是没有自由变元的公式。如果把它们视作带有（未出现的）类型 <span class="arithmatex">\(A\)</span> 的自由变元 <span class="arithmatex">\(a\)</span> 的公式，对应的真值表可以被简单地写成：</p>
<div class="arithmatex">\[
\mathsf{true}: A \to \mathbf 1 \stackrel t \to \Omega, \quad \mathsf{false}: A \to \mathbf 1 \stackrel f \to \Omega
\]</div>
<p>在有可能造成混淆的情况下，将其记为 <span class="arithmatex">\(\mathsf{true}_A\)</span> 和 <span class="arithmatex">\(\mathsf{false}_A\)</span>。</p>
<p>最后，我们以一个显然但有用的观察作为这一节的尾声：</p>
<div class="admonition success">
<p class="admonition-title">命题</p>
<p>（4.6）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，考虑两个具备相同的类型为 <span class="arithmatex">\(A_1, \cdots, A_n\)</span> 的自由变元 <span class="arithmatex">\(a_1, \cdots, a_n\)</span> 的公式 <span class="arithmatex">\(\varphi\)</span> 和 <span class="arithmatex">\(\psi\)</span>，将由 <span class="arithmatex">\(\lceil \varphi \rceil\)</span> 和 <span class="arithmatex">\(\lceil \psi \rceil\)</span> 分类的 <span class="arithmatex">\(A_1 \times \cdots \times A_n\)</span> 中的子对象分别记作 <span class="arithmatex">\([\varphi]\)</span> 和 <span class="arithmatex">\([\psi]\)</span>，则由</p>
<div class="arithmatex">\[
\lceil \mathsf{true} \rceil, \quad \lceil \mathsf{false} \rceil, \quad \lceil \varphi \wedge \psi \rceil, \quad \lceil \varphi \vee \psi \rceil, \quad \lceil \varphi \implies \psi \rceil, \quad \lceil \lnot \varphi \rceil
\]</div>
<p>所分类的 <span class="arithmatex">\(A_1 \times \cdots \times A_n\)</span> 中的子对象不外乎是其子对象规程的 Heyting 代数中的</p>
<div class="arithmatex">\[
A_1 \times \cdots \times A_n, \quad 0, \quad [\varphi] \wedge [\psi], \quad [\varphi] \vee [\psi], \quad [\varphi] \implies [\psi], \quad \lnot [\varphi]
\]</div>
</div>
<details class="info" open="open">
<summary>证明</summary>
<p>由定义直接得出。</p>
</details>
<h2 id="43">4.3 拓扑斯中的命题逻辑<a class="headerlink" href="#43" title="Permanent link">&para;</a></h2>
<p>下面我们需要说明，什么叫某个公式是真的，并且推断出拓扑斯的内逻辑中有效的推理规则。</p>
<div class="admonition info">
<p class="admonition-title">定义</p>
<p>（4.7）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，设 <span class="arithmatex">\(\varphi\)</span> 是一个带有类型分别为 <span class="arithmatex">\(A_1, \cdots, A_n\)</span> 的变元 <span class="arithmatex">\(a_1, \cdots, a_n\)</span> 的公式，我们说这个公式为真当且仅当 <span class="arithmatex">\(\lceil \varphi \rceil = \lceil \mathsf{true} \rceil\)</span>，记作 <span class="arithmatex">\(\models \varphi\)</span>。这也就是说，<span class="arithmatex">\(\lceil \varphi \rceil\)</span> 分类的子对象就是 <span class="arithmatex">\(A_1 \times \cdots \times A_n\)</span> 本身。</p>
</div>
<div class="admonition success">
<p class="admonition-title">定理</p>
<p>（4.8）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，直觉主义谓词逻辑的公理全部成立。也就是说，给定三个带有相同自由变元的公式 <span class="arithmatex">\(\varphi, \psi, \theta\)</span>，以下性质成立：</p>
<div class="arithmatex">\[\begin{aligned}
(P1) &amp; \models \varphi \implies (\psi \implies \varphi)\\
(P2) &amp; \models (\varphi \implies (\psi \implies \theta)) \implies ((\varphi \implies \psi) \implies (\varphi \implies \theta))\\
(P3) &amp; \models \varphi \implies (\psi \implies (\varphi \wedge \psi))\\
(P4) &amp; \models \varphi \wedge \psi \implies \varphi\\
(P5) &amp; \models \varphi \wedge \psi \implies \psi\\
(P6) &amp; \models \varphi \implies (\varphi \vee \psi)\\
(P7) &amp; \models \psi \implies (\varphi \vee \psi)\\
(P8) &amp; \models (\varphi \implies \theta) \implies ((\varphi \implies \theta) \implies ((\varphi \vee \psi) \implies \theta))\\
(P9) &amp; \models (\varphi \implies \psi) \implies ((\varphi \implies \lnot \psi) \implies \lnot \varphi)\\
(P10) &amp; \models \lnot \varphi \implies (\varphi \implies \psi)\\
(P11) &amp;\ 若\ \models \varphi\ 且 \ \models \varphi \implies \psi\ 则\ \models \psi\ \text{（肯定前件，modus ponens）}
\end{aligned}\]</div>
</div>
<details class="info" open="open">
<summary>证明</summary>
<p>假定 <span class="arithmatex">\(\varphi, \psi, \theta\)</span> 的自由变元为类型分别为 <span class="arithmatex">\(A_1, \cdots, A_n\)</span> 的变元 <span class="arithmatex">\(a_1, \cdots, a_n\)</span>。由定义 4.7 和命题 4.6，我们只要表明由这些公式分类的 <span class="arithmatex">\(A_1 \times \cdots \times A_n\)</span> 的子对象就是 <span class="arithmatex">\(A_1 \times \cdots \times A_n\)</span> 自身。</p>
<p>事实上，<span class="arithmatex">\((P1)\)</span> 到 <span class="arithmatex">\((P11)\)</span> 在任意 Heyting 代数中都成立（见定义 2.17）。例如，如果 <span class="arithmatex">\(a, b\)</span> 是 Heyting 代数 <span class="arithmatex">\(H\)</span> 中的两个元素，证明 <span class="arithmatex">\((P1)\)</span> 就是要表明：</p>
<div class="arithmatex">\[
1 = (a \implies (b \implies a))
\]</div>
<p>当然，这也就等价于证明：</p>
<div class="arithmatex">\[
1 \leqslant (a \implies (b \implies a))
\]</div>
<p>即：</p>
<div class="arithmatex">\[
a = 1 \wedge a \leqslant b \implies a
\]</div>
<p>这进一步地等价于证明：</p>
<div class="arithmatex">\[
a \wedge b \leqslant a
\]</div>
<p>而这是显然的。</p>
</details>
<p>肯定前件规则是一条有效的公式之间的推断规则，它自己不是一个有效的公式。</p>
<p>参考文献 [4] 中的 6.7 节给出了一个从定理 4.8 可以导出的有效公式和推断规则的冗长列表。</p>
<p>下面的命题强调了它与经典逻辑的第一个重大区别；亦见例子 4.11。</p>
<div class="admonition success">
<p class="admonition-title">命题</p>
<p>（4.9）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，令 <span class="arithmatex">\(\varphi\)</span> 和 <span class="arithmatex">\(\psi\)</span> 为两个带有相同自由变元的公式：</p>
<ul>
<li>若 <span class="arithmatex">\(\models \varphi \wedge \psi\)</span>，则 <span class="arithmatex">\(\models \varphi\)</span> <strong>且</strong> <span class="arithmatex">\(\models \psi\)</span>；</li>
<li>但若 <span class="arithmatex">\(\models \varphi \vee \psi\)</span>，在通常情况下，<span class="arithmatex">\(\models \varphi\)</span> <strong>或</strong> <span class="arithmatex">\(\models \psi\)</span> 并不成立。</li>
</ul>
</div>
<details class="info" open="open">
<summary>证明</summary>
<p>与命题 4.8 的证明类似，也不妨考虑任意 Heyting 代数 <span class="arithmatex">\(H\)</span> 中的情形。给定 <span class="arithmatex">\(a, b \in H\)</span>，当然 <span class="arithmatex">\(a \wedge b = 1\)</span> 迫使 <span class="arithmatex">\(a = 1\)</span> 且 <span class="arithmatex">\(b = 1\)</span>；但是同样显然的是，<span class="arithmatex">\(a \vee b = 1\)</span> 并不意味着两个元素中一定有一个为 <span class="arithmatex">\(1\)</span>。</p>
</details>
<p>当然，还有另外一个与经典逻辑的重大不同：排中律</p>
<div class="arithmatex">\[
\models \varphi \vee \lnot \varphi
\]</div>
<p>在拓扑斯的内逻辑中不成立。回顾 3.3 节，排中律成立当且仅当拓扑斯是布尔的。</p>
<h2 id="44">4.4 拓扑斯中的谓词逻辑<a class="headerlink" href="#44" title="Permanent link">&para;</a></h2>
<p>下面我们考虑包含量词的额外逻辑规则</p>
<div class="admonition success">
<p class="admonition-title">定理</p>
<p>（4.10）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，所有直觉主义谓词逻辑的公理也成立。明确地说，考虑两个带有相同自由变元的公式 <span class="arithmatex">\(\varphi\)</span> 和 <span class="arithmatex">\(\psi\)</span>，以及项 <span class="arithmatex">\(\tau\)</span>，以下性质成立：</p>
<div class="arithmatex">\[\begin{aligned}
(P12) &amp; \models (\forall x\ (\varphi \implies \psi)) \implies ((\forall x \ \varphi) \implies \forall x \ \psi)\\
(P13) &amp; \models (\exists x\ (\varphi \implies \psi)) \implies ((\exists x \ \varphi) \implies \exists x \ \psi)\\
(P14) &amp; \models \varphi \implies (\forall x \ \varphi)\ 若\ x\ 不是\ \varphi\ 中的一个自由变元\\
(P15) &amp; \models (\exists x \ \varphi) \implies \varphi \ 若 \ x\ 不是 \ \varphi\ 中的一个自由变元\\
(P16) &amp; \models (\forall x \ \varphi) \implies \varphi(\tau) \ 若 \ \tau \ 中不含 \ \varphi\ 的受限变元\\
&amp; \text{ 而且 $\varphi(\tau)$ 是在 $\varphi$ 中将 $x$ 用 $\tau$ 替代的结果}\\
(P17) &amp; \models  \varphi(\tau) \implies (\forall x \ \varphi) \ 若 \ \tau \ 中不含 \ \varphi\ 的受限变元\\
&amp; \text{ 而且 $\varphi(\tau)$ 是在 $\varphi$ 中将 $x$ 用 $\tau$ 替代的结果}\\
(P18) &amp;\ 若 \ \models \varphi \ 则 \ \models \forall x \ \varphi
\end{aligned}\]</div>
</div>
<details class="info" open="open">
<summary>证明</summary>
<p>为了简化记号，考虑 <span class="arithmatex">\(\varphi\)</span> 和 <span class="arithmatex">\(\psi\)</span> 带有类型分别为 <span class="arithmatex">\(X\)</span> 和 <span class="arithmatex">\(A\)</span> 的自由变元 <span class="arithmatex">\(x\)</span> 和 <span class="arithmatex">\(a\)</span>。公式 <span class="arithmatex">\((P12)\)</span> 中有自由变元 <span class="arithmatex">\(a\)</span>，因此证明 <span class="arithmatex">\(P12\)</span> 就相当于证明在 <span class="arithmatex">\(A\)</span> 的子对象的 Heyting 代数中证明对应的结论。考虑投影 <span class="arithmatex">\(p: X \times A \to A\)</span>，回顾定理 2.9，我们需要证明：</p>
<div class="arithmatex">\[
A = [(\forall x\ (\varphi \implies \psi)) \implies ((\forall x \ \varphi) \implies (\forall x \ \psi))]
\]</div>
<p>也就是说：</p>
<div class="arithmatex">\[
A \leqslant [\forall x\ (\varphi \implies \psi)] \implies ([\forall x \ \varphi] \implies [\forall x\ \psi])
\]</div>
<p>根据 Heyting 代数中 <span class="arithmatex">\(\implies\)</span> 的定义，这相当于是说：</p>
<div class="arithmatex">\[
[\forall x \ (\varphi \implies \psi)] = A \wedge [\forall x \ \varphi \implies \psi] \leqslant ([\forall x\ \varphi] \implies [\forall x\ \psi])
\]</div>
<p>更进一步地：</p>
<div class="arithmatex">\[
[\forall x\ (\varphi \implies \psi)] \wedge [\forall x\ \varphi] \leqslant [\forall x \ \psi]
\]</div>
<p>再应用定理 2.9 给出的伴随对 <span class="arithmatex">\(p^{-1} \dashv \pi_p\)</span>，将其转化为：</p>
<div class="arithmatex">\[
p^{-1}([\forall x\ (\varphi \implies \psi)] \wedge [\forall x \ \varphi]) \leqslant [\psi]
\]</div>
<p>即：</p>
<div class="arithmatex">\[
p^{-1}[\forall x \ (\varphi \implies \psi)] \wedge p^{-1}[\forall x\ \varphi] \leqslant [\psi]
\]</div>
<p>伴随对 <span class="arithmatex">\(p^{-1} \dashv \pi_p\)</span> 的余单位表明，对于任意 <span class="arithmatex">\(A\)</span> 的子对象 <span class="arithmatex">\(S\)</span> 都有 <span class="arithmatex">\(p^{-1}\forall x(S) \leqslant S\)</span>。于是：</p>
<div class="arithmatex">\[
p^{-1}[\forall x \ (\varphi \implies \psi)] \wedge p^{-1}[\forall x\ \varphi] \leqslant [\varphi \implies \psi] \wedge [\varphi] = ([\varphi] \implies [\psi]) \wedge [\varphi] \leqslant [\psi]
\]</div>
<p>其它的性质的证明也是类似的。</p>
</details>
<p>同样的，在参考文献 [4] 的 6.8 节中，也有一长串能从定理 4.10 推出的有效公式列表。</p>
<p>接下来，我们用一个例子来表明在命题 4.9 中提到过的其与经典逻辑的不同。</p>
<div class="admonition info">
<p class="admonition-title">例子</p>
<p>（4.11）考虑实直线上的层拓扑斯。连续函数层（参见 1.2 节）满足以下命题：</p>
<div class="arithmatex">\[
\models (\exists g\ f \times g = 1) \vee (\exists g\ (1 - f) \times g = 1)
\]</div>
<p>但是以下两个命题均不成立：</p>
<div class="arithmatex">\[
\exists g\ f \times g = 1, \quad \exists g\ (1 - f) \times g = 1
\]</div>
</div>
<details class="info" open="open">
<summary>证明</summary>
<p>不妨假设 <span class="arithmatex">\(f\)</span> 为常元，即一个从 <span class="arithmatex">\(\R\)</span> 到 <span class="arithmatex">\(\R\)</span> 的连续函数。<span class="arithmatex">\(f\)</span> 为变元的证明也是类似的。</p>
<p>若存在 <span class="arithmatex">\(r \in \R\)</span> 使得 <span class="arithmatex">\(f(r) \neq 0\)</span>，则存在 <span class="arithmatex">\(r\)</span> 的一个开邻域 <span class="arithmatex">\(U_r\)</span> 其中 <span class="arithmatex">\(f(r')\)</span> 处处不为 <span class="arithmatex">\(0\)</span>。设 <span class="arithmatex">\(U\)</span> 是这种形式的 <span class="arithmatex">\(U_r\)</span> 的并，那么任意 <span class="arithmatex">\(r' \in U\)</span>，<span class="arithmatex">\(f(r') \neq 0\)</span>，因此在 <span class="arithmatex">\(U\)</span> 上只要取 <span class="arithmatex">\(g = \frac 1 f\)</span> 即可。</p>
<p>类似的，如果存在 <span class="arithmatex">\(r \in \R\)</span> 使得 <span class="arithmatex">\(f(r) \neq 1\)</span>，则存在 <span class="arithmatex">\(r\)</span> 的一个开邻域 <span class="arithmatex">\(V_r\)</span> 其中 <span class="arithmatex">\(f(r')\)</span> 处处不为 <span class="arithmatex">\(1\)</span>。取 <span class="arithmatex">\(V\)</span> 为 <span class="arithmatex">\(V_r\)</span> 的并，那么任意 <span class="arithmatex">\(r' \in V\)</span>，<span class="arithmatex">\(f(r') \neq 1\)</span>，因此在 <span class="arithmatex">\(V\)</span> 上只要取 <span class="arithmatex">\(g = \frac 1 {1 - f}\)</span> 即可。</p>
<p>显然，<span class="arithmatex">\(U \cup V = \R\)</span>，因此第一个命题成立。但是如果取一个有 <span class="arithmatex">\(f(r_1) = 0\)</span>，<span class="arithmatex">\(f(r_2) = 1\)</span> 的 <span class="arithmatex">\(f\)</span>，那么 <span class="arithmatex">\(\exists g\ f \times g = 1\)</span> 在 <span class="arithmatex">\(r_1\)</span> 的邻域不成立，<span class="arithmatex">\(\exists g\ (1 - f) \times g = 1\)</span> 在 <span class="arithmatex">\(r_2\)</span> 的邻域不成立，因此两者都不成立。</p>
</details>
<p>这个例子表明，在实直线上的层拓扑斯中，连续函数的层是一个“局部环”（local ring）：对于其中的任意元素 <span class="arithmatex">\(f\)</span>，<span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(1 - f\)</span> 至少有一个是可逆的。这个例子也表明了存在量词的“局部性质”：元素 <span class="arithmatex">\(g\)</span> 在每个点的邻域都存在，但是通常全局的 <span class="arithmatex">\(g\)</span> 不存在。</p>
<h2 id="45">4.5 拓扑斯的结构，用其内语言描述<a class="headerlink" href="#45" title="Permanent link">&para;</a></h2>
<p>现在，我们的填字游戏进展到哪一步了？我们知道怎么构造合法的<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup>项和公式；我们给它们指派了一个实际的箭头或者拓扑斯中的对象；我们也已经知道一个公式为真是什么意思了。好，现在我宣布，在我们的填字游戏中，你每次写出一个为真的公式，你就能赢得一块比利时巧克力<sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup>！哪怕你很喜欢比利时巧克力，恐怕你也并不乐意长时间这样玩下去。你真正感兴趣的，是去证明拓扑斯中的那些范畴论构造相关的定理：积、余等化子、指数，等等。至于形式化地玩弄前面给出来的那些规则，那是非常无聊的事，除非有时候它们在证明实际的范畴论性质时能派上用场。为了能够用这种填字游戏表示范畴论性质，我们还需要做一次翻译，把范畴论术语翻译成拓扑斯的内逻辑的说法。下面我们给出一些代表性（但并不完全）的范畴论术语的翻译：</p>
<div class="admonition success">
<p class="admonition-title">命题</p>
<p>（4.12）在拓扑斯 <span class="arithmatex">\(\mathcal E\)</span> 中，考虑：</p>
<ul>
<li>对象 <span class="arithmatex">\(A\)</span> 和 <span class="arithmatex">\(B\)</span>；</li>
<li>态射 <span class="arithmatex">\(f, g: A \rightrightarrows B\)</span> 和 <span class="arithmatex">\(h: B \to C\)</span>；</li>
<li>子对象 <span class="arithmatex">\(A_1 \rightarrowtail A\)</span>，<span class="arithmatex">\(A_2 \rightarrowtail A\)</span> 和 <span class="arithmatex">\(B' \rightarrowtail B\)</span>；</li>
<li>类型 <span class="arithmatex">\(A\)</span> 的变量 <span class="arithmatex">\(a, a'\)</span>，类型 <span class="arithmatex">\(B\)</span> 的变量 <span class="arithmatex">\(b\)</span> 和类型 <span class="arithmatex">\(C\)</span> 的变量 <span class="arithmatex">\(c\)</span>；</li>
</ul>
<p>以下性质成立：</p>
<ol>
<li><span class="arithmatex">\(f = g\)</span> 当且仅当 <span class="arithmatex">\(\models f(a) = g(a)\)</span>；</li>
<li><span class="arithmatex">\(f\)</span> 是一个单同态当且仅当 <span class="arithmatex">\(\models (f(a) = f(a')) \implies (a = a')\)</span>；</li>
<li><span class="arithmatex">\(f\)</span> 是一个满同态当且仅当 <span class="arithmatex">\(\models \exists a \ f(a) = b\)</span>；</li>
<li><span class="arithmatex">\(A_1 \cap A_2 = \{a | (a \in A_1) \wedge (a \in A_2)\}\)</span>；</li>
<li><span class="arithmatex">\(A_1 \cup A_2 = \{a | (a \in A_1) \vee (a \in A_2)\}\)</span>；</li>
<li><span class="arithmatex">\(\mathrm{Im}\ \Sigma_f(A_1) = \{b | \exists a((a \in A_1) \wedge (b = f(a)))\}\)</span>；</li>
<li><span class="arithmatex">\(\pi_f(A_1) = \{b | \forall a ((f(a) = b) \implies (a \in A_1))\}\)</span>；</li>
<li><span class="arithmatex">\(f^{-1}(B') = \{a | f(a) \in B'\}\)</span>；</li>
<li><span class="arithmatex">\(\mathrm{Im}\ (f) = \{b | \exists a\ f(a) = b\}\)</span>；</li>
<li><span class="arithmatex">\(\mathrm{Ker}\ (f, g) = \{a | f(a) = g(a)\}\)</span>；</li>
<li><span class="arithmatex">\(f \times_B h = \{(a, c) | f(a) = h(c)\}\)</span>，指 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(h\)</span> 的拉回。</li>
</ol>
</div>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>“多产的叉子搅拌黄色的数学。”一个典型的符合语法但是不知所云的句子。——译者注&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>看起来作者在原文中用的是 <code>tipa</code> 包中的 <code>\textopencorner</code> 而不是这里用的 <code>\lceil</code>，译者用 <code>\lceil</code> 代替是因为 KaTeX 没有这玩意。——译者注&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>作者混用了 valid 的两个义项，一个是指公式是良定（或者叫良构，well-formed）的，一个是指公式为真。在这里前者译作合法，后者译作有效。——译者注&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>比利时巧克力在欧洲非常有名，大概相当于在内地说高邮咸鸭蛋……？——译者注&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
</ol>
</div>





  <h2 id="__comments">评论</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
        data-repo="frightenedfoxcn/notes"
        data-repo-id="R_kgDOI23RIA"
        data-category="Announcements"
        data-category-id="DIC_kwDOI23RIM4CUEOA"
        data-mapping="pathname"
        data-strict="1"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"
      giscus.setAttribute("data-theme", theme) 
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate" ? "dark" : "light"

          /* Instruct Giscus to change theme */
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            回到页面顶部
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="页脚" >
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="上一页: Francis Bouceux: Some flavours of topos theory" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                上一页
              </span>
              Francis Bouceux: Some flavours of topos theory
            </div>
          </div>
        </a>
      
      
        
        <a href="../06refs/" class="md-footer__link md-footer__link--next" aria-label="下一页: 参考文献" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                下一页
              </span>
              参考文献
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\s\\-\uff0c\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"></script>
      
        <script src="../../../js/katex.js"></script>
      
    
  </body>
</html>